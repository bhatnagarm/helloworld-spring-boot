# Telemetry Products (Observability) 

##Zipkin
Zipkin is a distributed tracing system. It helps gather timing data needed to troubleshoot latency problems in service architectures. Features include both the collection and lookup of this data.

If you have a trace ID in a log file, you can jump directly to it. Otherwise, you can query based on attributes such as 
service, operation name, tags and duration. Some interesting data will be summarized for you, such as the percentage of 
time spent in a service, and whether or not operations failed.

###Start Zipkin:
    
    kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=zipkin -o jsonpath='{.items[0].metadata.name}') 15032:9411
    
Open your browser to http://localhost:15032

##Jaeger
Jaeger, inspired by Dapper and OpenZipkin, is a distributed tracing system released as open source by Uber Technologies. 
It is used for monitoring and troubleshooting microservices-based distributed systems, including:

* Distributed context propagation
* Distributed transaction monitoring
* Root cause analysis
* Service dependency analysis
* Performance / latency optimization

Uber published a blog post, Evolving Distributed Tracing at Uber, where they explain the history and reasons for the 
architectural choices made in Jaeger. Yuri Shkuro, creator of Jaeger, also published a book Mastering Distributed 
Tracing that covers in-depth many aspects of Jaeger design and operation, as well as distributed tracing in general.

###Start Jaeger

    istioctl dashboard jaeger
    kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=jaeger -o jsonpath='{.items[0].metadata.name}') 15032:16686

Open your browser to http://localhost:15032.


##Prometheus
Prometheus is an open-source systems monitoring and alerting toolkit originally built at SoundCloud. Since its inception 
in 2012, many companies and organizations have adopted Prometheus, and the project has a very active developer and user 
community. It is now a standalone open source project and maintained independently of any company. To emphasize this, 
and to clarify the project's governance structure, Prometheus joined the Cloud Native Computing Foundation in 2016 as 
the second hosted project, after Kubernetes.

###Features

Prometheus's main features are:

* a multi-dimensional data model with time series data identified by metric name and key/value pairs
* PromQL, a flexible query language to leverage this dimensionality
* no reliance on distributed storage; single server nodes are autonomous
* time series collection happens via a pull model over HTTP
* pushing time series is supported via an intermediary gateway
* targets are discovered via service discovery or static configuration
* multiple modes of graphing and dashboarding support

### Start Prometheus UI

    istioctl dashboard prometheus
    kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=prometheus -o jsonpath='{.items[0].metadata.name}') 9090:9090 &

Open your browser to http://localhost:9090/graph 

###About the Prometheus add-on
Mixer comes with a built-in Prometheus adapter that exposes an endpoint serving generated metric values. The Prometheus 
add-on is a Prometheus server that comes preconfigured to scrape Mixer endpoints to collect the exposed metrics. It 
provides a mechanism for persistent storage and querying of Istio metrics.
The configured Prometheus add-on scrapes the following endpoints:

1. istio-telemetry.istio-system:42422: The istio-mesh job returns all Mixer-generated metrics.
2. istio-telemetry.istio-system:15014: The istio-telemetry job returns all Mixer-specific metrics. Use this endpoint to 
monitor Mixer itself.
3. istio-proxy:15090: The envoy-stats job returns raw stats generated by Envoy. Prometheus is configured to look for 
pods with the envoy-prom endpoint exposed. The add-on configuration filters out a large number of envoy metrics during 
collection in an attempt to limit the scale of data by the add-on processes.
4. istio-pilot.istio-system:15014: The pilot job returns the Pilot-generated metrics.
5. istio-galley.istio-system:15014: The galley job returns the Galley-generated metrics.
6. istio-policy.istio-system:15014: The istio-policy job returns all policy-related metrics.
7. istio-citadel.istio-system:15014: The istio-citadel job returns all Citadel-generated metrics.

For more on querying Prometheus, please read their [querying docs](https://prometheus.io/docs/querying/basics/).


##Grafana Dashboards
Grafana allows you to query, visualize, alert on and understand your metrics no matter where they are stored. Create, 
explore, and share dashboards with your team and foster a data driven culture.

###Start Grafana UI

    kubectl -n istio-system get svc prometheus
    kubectl -n istio-system get svc grafana
    istioctl dashboard grafana
    kubectl -n istio-system port-forward $(kubectl -n istio-system get pod -l app=grafana -o jsonpath='{.items[0].metadata.name}') 3000:3000 &

Visit http://localhost:3000/dashboard/db/istio-mesh-dashboard in your web browser.


##Kiali Dashboard
Kiali is a management console for Istio-based service mesh. It provides dashboards, observability and lets you to 
operate your mesh with robust configuration and validation capabilities. It shows the structure of your service mesh 
by inferring traffic topology and displays the health of your mesh. Kiali provides detailed metrics, powerful 
validation, Grafana access, and strong integration for distributed tracing with Jaeger. 

###Start Kiali UI

    kubectl -n istio-system get svc kiali
    istioctl dashboard kiali
    
Visit http://localhost:20001/kiali in your web browser
